<!-- Profileinstellungen Modal -->
<div id="profile-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 hidden" role="dialog"
    aria-modal="true" aria-labelledby="profile-title">
    <div class="bg-white rounded-2xl p-6 max-w-md w-full shadow-xl relative animate-fade-in">
        <button id="profile-close"
            class="absolute top-3 right-3 text-2xl text-gray-400 hover:text-cyan-500 focus:outline-none">&times;</button>
        <h2 id="profile-title" class="text-xl font-bold mb-4 text-cyan-700 flex items-center gap-2">
            <svg xmlns='http://www.w3.org/2000/svg' class='w-6 h-6 text-cyan-400' fill='none' viewBox='0 0 24 24'
                stroke='currentColor'>
                <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2'
                    d='M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z' />
            </svg>
            Profileinstellungen
        </h2>
        <div id="profile-balance-container" class="mb-4">
            <label class="block text-sm font-medium text-gray-700">Guthaben</label>
            <div id="profile-balance" class="mt-1 text-lg font-semibold text-green-700">–</div>
        </div>
        <div id="profile-choice" class="flex flex-col gap-3 mb-4">
            <button id="profile-edit-image-btn" class="btn-main w-full">Profilbild ändern</button>
            <button id="profile-edit-name-btn" class="btn-main w-full">Benutzername ändern</button>
            <button id="profile-edit-password-btn" class="btn-main w-full">Passwort ändern</button>
        </div>
        <form id="profile-image-form" class="space-y-4 hidden">
            <label for="profile-image-url" class="block text-sm font-medium text-gray-700">Profilbild-URL</label>
            <input type="url" id="profile-image-url" name="profile_image_url"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-cyan-500 focus:border-cyan-500"
                placeholder="https://..." />
            <div class="flex gap-2">
                <button type="submit" class="btn-main flex-1">Speichern</button>
                <button type="button" id="profile-cancel-image"
                    class="btn-main flex-1 bg-gray-300 text-gray-800">Abbrechen</button>
            </div>
            <div id="profile-image-message" class="mt-2 text-center text-sm"></div>
        </form>
        <form id="profile-name-form" class="space-y-4 hidden">
            <label for="profile-username" class="block text-sm font-medium text-gray-700">Benutzername</label>
            <input type="text" id="profile-username" name="username"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-cyan-500 focus:border-cyan-500"
                required />
            <div class="flex gap-2">
                <button type="submit" class="btn-main flex-1">Speichern</button>
                <button type="button" id="profile-cancel-name"
                    class="btn-main flex-1 bg-gray-300 text-gray-800">Abbrechen</button>
            </div>
            <div id="profile-name-message" class="mt-2 text-center text-sm"></div>
        </form>
        <form id="profile-password-form" class="space-y-4 hidden">
            <label for="profile-password" class="block text-sm font-medium text-gray-700">Neues Passwort</label>
            <input type="password" id="profile-password" name="password"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-cyan-500 focus:border-cyan-500"
                autocomplete="new-password" />
            <label for="profile-password-repeat" class="block text-sm font-medium text-gray-700">Passwort
                wiederholen</label>
            <input type="password" id="profile-password-repeat" name="password-repeat"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-cyan-500 focus:border-cyan-500"
                autocomplete="new-password" />
            <div class="flex gap-2">
                <button type="submit" class="btn-main flex-1">Speichern</button>
                <button type="button" id="profile-cancel-password"
                    class="btn-main flex-1 bg-gray-300 text-gray-800">Abbrechen</button>
            </div>
            <div id="profile-password-message" class="mt-2 text-center text-sm"></div>
        </form>
        <div id="profile-message" class="mt-3 text-center text-sm"></div>
    </div>
</div>
<!-- Profileinstellungen Button -->
<button id="profile-btn"
    class="fixed bottom-4 right-4 z-50 bg-cyan-500 hover:bg-cyan-600 text-white rounded-full shadow-lg w-14 h-14 flex items-center justify-center text-2xl focus:outline-none focus:ring-2 focus:ring-cyan-400 transition"
    aria-label="Profileinstellungen" title="Profileinstellungen">
    <svg xmlns='http://www.w3.org/2000/svg' class='w-7 h-7' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2'
            d='M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z' />
    </svg>
</button>
